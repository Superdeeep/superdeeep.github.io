(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{439:function(e,t,r){"use strict";r.r(t);var p=r(0),v=Object(p.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("好的，这一篇文章呢主要是写给自己看，以防日后密码失效需要重新配置而写。")]),e._v(" "),t("p",[e._v("首先呢是偶然发现有一个十分优质的GitHub项目，onedrive-vercel-index")]),e._v(" "),t("p",[e._v("项目地址：")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/spencerwooo/onedrive-vercel-index",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/spencerwooo/onedrive-vercel-index"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("当然他的访问速度还是有点慢的，而且还需要使用魔法😂这个就等日后看看怎么解决吧")]),e._v(" "),t("p",[e._v("这个项目呢，可以用Vercel部署一个网站然后再结合反代把Onedrive网盘的内容目录显示出来，可以实现直链下载，在线播放，以及访客无需登录即可访问Onedrive云盘下的目录，然后下载。")]),e._v(" "),t("p",[e._v("这不就可以当一个分享性质的网盘？然后本地同步到Onedrive云端，然后以后有什么刷机包，工具包就可以直接上传分享给大家。光想想都觉得非常的美妙~")]),e._v(" "),t("p",[e._v("然后就说干就干，这里说一句，这个网盘的整体搭建难度不大，但是配置较多且比较繁琐，所以呢才会有这么一篇文章来帮助大家避坑。")]),e._v(" "),t("p",[e._v("好的，让我们跟随官方文档开始吧！")]),e._v(" "),t("p",[e._v("这里我下载了PDF版的文档，各位可以下载后照着文档配合着本文一起看。")]),e._v(" "),t("p",[e._v("首先你需要一个可以自己注册Azure程序的微软账号，可以去拼多多或者淘宝上买一个，搜索Onedrive25TB，选择不限制API的就可以，价格也还ok，当然如果你想自己搞E5账号自己折腾当然也可以，这里我就选择买一个省事一点，毕竟日后要是炸鸡了，客服还包换号对吧，省的自己闹腾（写文章前已经炸了，客服马上就发了新号）。")]),e._v(" "),t("p",[e._v("然后就是改密码啥的就不说了，记住你的账号，然后开始吧。")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://ondrive.vercel.app/api/raw/?path=/onedrive-vercel-index/quickstart.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("立即上手.pdf"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"https://ondrive.vercel.app/api/raw/?path=/onedrive-vercel-index/clientid.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("配置Clientid"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("首先Fork这个项目，这个就不多说")]),e._v(" "),t("p",[e._v("然后按着文档修改对应的js文件，这个也不用多说，只需要知道js文件再config文件夹就OK。")]),e._v(" "),t("p",[e._v("API参数这里我写的是")]),e._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("authApi")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'https://login.microsoftonline.com/common/oauth2/v2.0/token'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("driveApi")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'https://graph.microsoft.com/v1.0/me/drive'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n")])])]),t("p",[e._v("和官网一样没有变动，如果你是世纪互联的号那可能就要更改一下了")]),e._v(" "),t("p",[e._v("然后就是需要踩坑的地方了")]),e._v(" "),t("p",[e._v("就是你需要自己配置"),t("a",{attrs:{href:"https://ovi.swo.moe/zh/docs/advanced",target:"_blank",rel:"noopener noreferrer"}},[e._v("clientid 与 secret"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("好的，首先我们先打开以下链接：")]),e._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade",target:"_blank",rel:"noopener noreferrer"}},[e._v("Microsoft Azure App registrations"),t("OutboundLink")],1),e._v("（ OneDrive 国际版、企业版与教育版，E5 订阅专用）")])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://portal.azure.cn/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade",target:"_blank",rel:"noopener noreferrer"}},[e._v("Microsoft Azure.cn App registrations"),t("OutboundLink")],1),e._v("（OneDrive 世纪互联专用）")])])]),e._v(" "),t("p",[e._v("打开之后找到新建应用程序的地方,这一步都会")]),e._v(" "),t("p",[e._v("接下来按照图片所示进行填写")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Superdeeep/photo/onedriveaddapp.png",alt:"onedriveaddapp"}})]),e._v(" "),t("p",[e._v("然后点击注册")]),e._v(" "),t("p",[e._v("之后再寻找你的ClientID")]),e._v(" "),t("p",[e._v("在概述里面可以找到")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Superdeeep/photo/onedriveabouttt.png",alt:"onedriveabouttt"}})]),e._v(" "),t("p",[e._v("然后就是建一个密码")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Superdeeep/photo/onedrivepass.png",alt:"onedrivepass"}})]),e._v(" "),t("p",[e._v("然后这么填写信息")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Superdeeep/photo/onedrivepass2.png",alt:"onedrivepass2"}})]),e._v(" "),t("p",[e._v("最多只能写4年。")]),e._v(" "),t("p",[e._v("之后就是复制你的Client secret")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Superdeeep/photo/onedrivepass3.png",alt:"onedrivepass3"}})]),e._v(" "),t("p",[e._v("复制值就ok")]),e._v(" "),t("p",[e._v("然后修改API权限")]),e._v(" "),t("p",[e._v("找到这个地方")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Superdeeep/photo/onedriveapi1.png",alt:"onedriveapi1"}})]),e._v(" "),t("p",[e._v("点击添加权限")]),e._v(" "),t("p",[e._v("然后选择这个")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Superdeeep/photo/onedriveapi2.png",alt:"onedriveapi2"}})]),e._v(" "),t("p",[e._v("接着就是搜索那三个权限了")]),e._v(" "),t("ul",[t("li",[e._v("User.Read（这应该一开始就勾上了）")]),e._v(" "),t("li",[e._v("Files.Read.All")]),e._v(" "),t("li",[e._v("offline_access")])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Superdeeep/photo/onedriveapi3.png",alt:"onedriveapi3"}})]),e._v(" "),t("p",[e._v("搜索好一个点一个勾就ok。")]),e._v(" "),t("p",[e._v("到这里你的id 和 secret都准备好了，回到仓库"),t("a",{attrs:{href:"https://ovi.swo.moe/zh/docs/advanced#%E4%BF%AE%E6%94%B9-apiconfigjs",target:"_blank",rel:"noopener noreferrer"}},[e._v("修改 "),t("code",[e._v("api.config.js")]),t("OutboundLink")],1),e._v("相关内容")]),e._v(" "),t("p",[e._v("secret就按照官网文档进行AES加密后再填写进去。")]),e._v(" "),t("p",[e._v("ok接下来你还需要创建一个REDIS")]),e._v(" "),t("p",[e._v("打开这个链接   "),t("a",{attrs:{href:"https://console.upstash.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.upstash.com/"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("注册之后新建就OK")]),e._v(" "),t("p",[e._v("然后复制一下备用。")]),e._v(" "),t("p",[e._v("ok，现在请确认你都填好了相关的数据，本文的步骤可能会和官网有些许出入，不用担心，因为搭建之后发现这样的效率较高，耗费时间也要少一些。")]),e._v(" "),t("p",[e._v("现在你可以在vercel里导入项目了")]),e._v(" "),t("p",[e._v("之后你就需要如官网所说，配置好这个vercel项目的环境变量")]),e._v(" "),t("p",[e._v("以防你找不到，我特意截了一张图")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Superdeeep/photo/vercelennnbian.png",alt:"vercelennnbian"}})]),e._v(" "),t("p",[e._v("然后就是配置好后重新部署")]),e._v(" "),t("p",[e._v("等待几分钟之后就可以进行认证了")]),e._v(" "),t("p",[e._v("第一步只是确认信息无误")]),e._v(" "),t("p",[e._v("第二步会让你登录微软账号认证许可，我们点击接受即可。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Superdeeep/photo/onedriverenzhengg.png",alt:"onedriverenzhengg"}})]),e._v(" "),t("p",[e._v("然后会给你返回一个localhost的链接，我们直接复制这个链接，填到框框里即可")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://ovi.swo.moe/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fstep2-get-auth-code.f465e2de.png&w=3840&q=75",alt:""}})]),e._v(" "),t("p",[e._v("拿了张官方的图哈哈哈哈")]),e._v(" "),t("p",[e._v("之后等待几分钟，回到vercel里点击你的网站链接就ok了，别跟我说你找不到😂")]),e._v(" "),t("p",[e._v("如果你的OneDrive炸鸡了，需要重新部署redis和js配置文件")]),e._v(" "),t("p",[e._v("然后重新认证")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),t("p",[e._v("认证地址通常是")]),e._v(" "),t("p",[e._v("你的项目地址加上 onedrive-vercel-index-oauth/step-1/")])]),e._v(" "),t("p",[e._v("当然，如果OneDrive炸鸡了，里面的文件不能在线转移，只能下载后再转移。")])])}),[],!1,null,null,null);t.default=v.exports}}]);