(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{451:function(s,t,e){"use strict";e.r(t);var a=e(1),n=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"自己手动编译内核"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自己手动编译内核"}},[s._v("#")]),s._v(" 自己手动编译内核：")]),s._v(" "),t("p",[s._v("微软的WSL内核：https://github.com/microsoft/WSL2-Linux-Kernel")]),s._v(" "),t("p",[s._v("Linux内核：https://kernel.org/")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.6.58.tar.xz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-xf")]),s._v(" linux-6.6.58.tar.xz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" linux-6.6.58\n")])])]),t("p",[s._v("构建方法：")]),s._v(" "),t("ol",[t("li",[s._v("安装构建依赖")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Debian系\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" build-essential flex bison dwarves libssl-dev libelf-dev \nArch系\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pacman "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" base-devel openssl libelf\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("使用WSL2内核配置构建内核")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("make KCONFIG_CONFIG=config-wsl的路径 -j$(nproc)\n")])])]),t("p",[s._v("使用方法：")]),s._v(" "),t("p",[s._v("在文件"),t("code",[s._v("C:\\Users\\你的用户名\\.wslconfig")]),s._v("（没有则创建此文件）")]),s._v(" "),t("p",[s._v("加入以下内容：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[wsl2]\nkernel=C:\\\\Users\\\\你的用户名\\\\vmlinux\n")])])]),t("p",[s._v("相关的坑：")]),s._v(" "),t("p",[s._v("暂时没有找到解决方法，让6.6.58内核与Windows Docker Desktop 同时使用，目前的解决方法是使用5.15的内核")]),s._v(" "),t("p",[s._v("最相关的issue：https://github.com/microsoft/WSL/issues/11742")]),s._v(" "),t("p",[s._v("相关资料：")]),s._v(" "),t("p",[s._v("https://github.com/microsoft/WSL/releases")]),s._v(" "),t("p",[s._v("https://stackoverflow.com/questions/60830914/running-docker-gives-ports-are-not-available-error")]),s._v(" "),t("p",[s._v("https://xtzyj.top/2023/10/05/immich-introduction/")]),s._v(" "),t("p",[s._v("https://pythonspeed.com/articles/docker-connection-refused/")]),s._v(" "),t("p",[s._v("https://superuser.com/questions/1709437/how-can-i-update-the-kernel-in-wsl2-kernel-to-latest-release")]),s._v(" "),t("p",[s._v("https://learn.microsoft.com/en-us/windows/wsl/wsl-config#configuration-setting-for-wslconfig")]),s._v(" "),t("p",[s._v("历史比较老的内核：")]),s._v(" "),t("p",[s._v("https://www.catalog.update.microsoft.com/Search.aspx?q=wsl")])])}),[],!1,null,null,null);t.default=n.exports}}]);