<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>控制节点安装的软件 | Superdeep</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://vuepress.vuejs.org/404.html"><style>.theme-vdoing-content { display:none }</noscript>
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/Superdeeep/photo@main/headmemini.ico">
    <meta name="description" content="">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.1e1b9f74.css" as="style"><link rel="preload" href="/assets/js/app.64beb6dd.js" as="script"><link rel="preload" href="/assets/js/4.799cf1b3.js" as="script"><link rel="preload" href="/assets/js/1.45e486ed.js" as="script"><link rel="preload" href="/assets/js/3.333afb37.js" as="script"><link rel="preload" href="/assets/js/73.ca78e141.js" as="script"><link rel="prefetch" href="/assets/js/10.a2366afa.js"><link rel="prefetch" href="/assets/js/100.531c425f.js"><link rel="prefetch" href="/assets/js/101.c27a544f.js"><link rel="prefetch" href="/assets/js/102.f703c00e.js"><link rel="prefetch" href="/assets/js/103.e4a273e2.js"><link rel="prefetch" href="/assets/js/104.70c9db2f.js"><link rel="prefetch" href="/assets/js/105.45c77d59.js"><link rel="prefetch" href="/assets/js/106.e9117743.js"><link rel="prefetch" href="/assets/js/11.1b7a3e85.js"><link rel="prefetch" href="/assets/js/12.06975bcf.js"><link rel="prefetch" href="/assets/js/13.8c23d81b.js"><link rel="prefetch" href="/assets/js/14.87bc2cc1.js"><link rel="prefetch" href="/assets/js/15.beaa9d58.js"><link rel="prefetch" href="/assets/js/16.c88dc665.js"><link rel="prefetch" href="/assets/js/17.f5b478cb.js"><link rel="prefetch" href="/assets/js/18.e164bd61.js"><link rel="prefetch" href="/assets/js/19.2d51efee.js"><link rel="prefetch" href="/assets/js/2.bac5277e.js"><link rel="prefetch" href="/assets/js/20.e99c9623.js"><link rel="prefetch" href="/assets/js/21.7b2b93ac.js"><link rel="prefetch" href="/assets/js/22.ba6a5131.js"><link rel="prefetch" href="/assets/js/23.9c7a7bbb.js"><link rel="prefetch" href="/assets/js/24.d4894e77.js"><link rel="prefetch" href="/assets/js/25.bda18fe7.js"><link rel="prefetch" href="/assets/js/26.be73b16c.js"><link rel="prefetch" href="/assets/js/27.1c7b1a74.js"><link rel="prefetch" href="/assets/js/28.6d3e7cc7.js"><link rel="prefetch" href="/assets/js/29.262cba8e.js"><link rel="prefetch" href="/assets/js/30.58fde9ca.js"><link rel="prefetch" href="/assets/js/31.a5b55555.js"><link rel="prefetch" href="/assets/js/32.c20c569d.js"><link rel="prefetch" href="/assets/js/33.4ed02d52.js"><link rel="prefetch" href="/assets/js/34.53739d31.js"><link rel="prefetch" href="/assets/js/35.18a76a7c.js"><link rel="prefetch" href="/assets/js/36.aba2a0aa.js"><link rel="prefetch" href="/assets/js/37.2359c2b9.js"><link rel="prefetch" href="/assets/js/38.56e455e1.js"><link rel="prefetch" href="/assets/js/39.42c3c542.js"><link rel="prefetch" href="/assets/js/40.f4275641.js"><link rel="prefetch" href="/assets/js/41.03af987e.js"><link rel="prefetch" href="/assets/js/42.2ba6227a.js"><link rel="prefetch" href="/assets/js/43.54c3e4e0.js"><link rel="prefetch" href="/assets/js/44.cc29abe8.js"><link rel="prefetch" href="/assets/js/45.d56034ae.js"><link rel="prefetch" href="/assets/js/46.75b3a9bd.js"><link rel="prefetch" href="/assets/js/47.b530cad9.js"><link rel="prefetch" href="/assets/js/48.855b5df9.js"><link rel="prefetch" href="/assets/js/49.409e6588.js"><link rel="prefetch" href="/assets/js/5.398983dd.js"><link rel="prefetch" href="/assets/js/50.65e0f0b5.js"><link rel="prefetch" href="/assets/js/51.24bbe58a.js"><link rel="prefetch" href="/assets/js/52.4b8021e6.js"><link rel="prefetch" href="/assets/js/53.d520d039.js"><link rel="prefetch" href="/assets/js/54.bdc9507f.js"><link rel="prefetch" href="/assets/js/55.45114303.js"><link rel="prefetch" href="/assets/js/56.b2d785c0.js"><link rel="prefetch" href="/assets/js/57.83ceda1a.js"><link rel="prefetch" href="/assets/js/58.68d4a7b3.js"><link rel="prefetch" href="/assets/js/59.f068a971.js"><link rel="prefetch" href="/assets/js/6.851114e0.js"><link rel="prefetch" href="/assets/js/60.f9ed1d2d.js"><link rel="prefetch" href="/assets/js/61.b7ad8eb7.js"><link rel="prefetch" href="/assets/js/62.52a8a340.js"><link rel="prefetch" href="/assets/js/63.b350af0a.js"><link rel="prefetch" href="/assets/js/64.f3f79224.js"><link rel="prefetch" href="/assets/js/65.7cb5c0f4.js"><link rel="prefetch" href="/assets/js/66.27e4d4d3.js"><link rel="prefetch" href="/assets/js/67.387b2ae2.js"><link rel="prefetch" href="/assets/js/68.34cb6088.js"><link rel="prefetch" href="/assets/js/69.f941b5da.js"><link rel="prefetch" href="/assets/js/7.80eb33bd.js"><link rel="prefetch" href="/assets/js/70.2ccaad74.js"><link rel="prefetch" href="/assets/js/71.ffd4d39d.js"><link rel="prefetch" href="/assets/js/72.6141eee4.js"><link rel="prefetch" href="/assets/js/74.633dfc81.js"><link rel="prefetch" href="/assets/js/75.213ae199.js"><link rel="prefetch" href="/assets/js/76.27b26c8a.js"><link rel="prefetch" href="/assets/js/77.1bc83fc8.js"><link rel="prefetch" href="/assets/js/78.5ec764ed.js"><link rel="prefetch" href="/assets/js/79.4f955f82.js"><link rel="prefetch" href="/assets/js/80.fcaffc9a.js"><link rel="prefetch" href="/assets/js/81.35f55e88.js"><link rel="prefetch" href="/assets/js/82.528bd482.js"><link rel="prefetch" href="/assets/js/83.07ae14b7.js"><link rel="prefetch" href="/assets/js/84.67556f0c.js"><link rel="prefetch" href="/assets/js/85.2c7f8d81.js"><link rel="prefetch" href="/assets/js/86.02ee46b2.js"><link rel="prefetch" href="/assets/js/87.7b12e6dc.js"><link rel="prefetch" href="/assets/js/88.ec20802d.js"><link rel="prefetch" href="/assets/js/89.fc3901b3.js"><link rel="prefetch" href="/assets/js/90.e601f47e.js"><link rel="prefetch" href="/assets/js/91.dd6c86bb.js"><link rel="prefetch" href="/assets/js/92.ada23650.js"><link rel="prefetch" href="/assets/js/93.ed170981.js"><link rel="prefetch" href="/assets/js/94.af8c187d.js"><link rel="prefetch" href="/assets/js/95.5ec6c830.js"><link rel="prefetch" href="/assets/js/96.b2dc2859.js"><link rel="prefetch" href="/assets/js/97.df8ed368.js"><link rel="prefetch" href="/assets/js/98.992f9561.js"><link rel="prefetch" href="/assets/js/99.f87a8a85.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.26b542fc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1e1b9f74.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cdn.jsdelivr.net/gh/Superdeeep/photo/topme.png" alt="Superdeep" class="logo"> <span class="site-name can-hide">Superdeep</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/pages/acfadc/" class="nav-link">笔记</a></div><div class="nav-item"><a href="/pages/a08e4d/" class="nav-link">趣闻</a></div><div class="nav-item"><a href="/pages/c85104/" class="nav-link">好物</a></div> <a href="https://github.com/Superdeeep/code" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/Superdeeep/photo@main/melogomini.png"> <div class="blogger-info"><h3>Superdeep</h3> <span>(￣▽￣)</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/pages/acfadc/" class="nav-link">笔记</a></div><div class="nav-item"><a href="/pages/a08e4d/" class="nav-link">趣闻</a></div><div class="nav-item"><a href="/pages/c85104/" class="nav-link">好物</a></div> <a href="https://github.com/Superdeeep/code" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>技术笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Windows笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>git笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>python笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Linux笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>VScode笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>C语言笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>web笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>人工智能</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>OpenStack</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/fa544f/" class="sidebar-link">OpenStack记录</a></li><li><a href="/pages/f60a24/" class="sidebar-link">配置控制节点和计算节点网络</a></li><li><a href="/pages/e84148/" class="sidebar-link">控制节点和计算节点都需要的操作</a></li><li><a href="/pages/658070/" aria-current="page" class="active sidebar-link">控制节点安装的软件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/658070/#安装mariadb数据库-mysql的分支" class="sidebar-link">安装mariadb数据库(mysql的分支)</a></li><li class="sidebar-sub-header level2"><a href="/pages/658070/#安装message-queue" class="sidebar-link">安装Message queue</a></li><li class="sidebar-sub-header level2"><a href="/pages/658070/#安装memcached" class="sidebar-link">安装Memcached</a></li><li class="sidebar-sub-header level2"><a href="/pages/658070/#安装etcd" class="sidebar-link">安装etcd</a></li><li class="sidebar-sub-header level2"><a href="/pages/658070/#安装keystone" class="sidebar-link">安装keystone</a></li><li class="sidebar-sub-header level2"><a href="/pages/658070/#安装glance" class="sidebar-link">安装Glance</a></li><li class="sidebar-sub-header level2"><a href="/pages/658070/#安装placement" class="sidebar-link">安装Placement</a></li><li class="sidebar-sub-header level2"><a href="/pages/658070/#安装nova" class="sidebar-link">安装Nova</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/658070/#配置compute节点" class="sidebar-link">配置Compute节点</a></li><li class="sidebar-sub-header level3"><a href="/pages/658070/#compute节点配置完成后" class="sidebar-link">Compute节点配置完成后....</a></li><li class="sidebar-sub-header level3"><a href="/pages/658070/#在控制节点添加计算节点" class="sidebar-link">在控制节点添加计算节点</a></li><li class="sidebar-sub-header level3"><a href="/pages/658070/#验证配置-2" class="sidebar-link">验证配置</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/658070/#安装neutron-使用的是ovn" class="sidebar-link">安装Neutron（使用的是OVN）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/658070/#在compute节点配置完neutron后" class="sidebar-link">在Compute节点配置完Neutron后</a></li><li class="sidebar-sub-header level3"><a href="/pages/658070/#配置验证" class="sidebar-link">配置验证</a></li><li class="sidebar-sub-header level3"><a href="/pages/658070/#创建ovn网络" class="sidebar-link">创建OVN网络!!!</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/658070/#安装dashboard" class="sidebar-link">安装Dashboard</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/658070/#接下来操作均可在web上操作" class="sidebar-link">接下来操作均可在web上操作</a></li><li class="sidebar-sub-header level3"><a href="/pages/658070/#创建实例的计算、内存和存储容量的大小" class="sidebar-link">创建实例的计算、内存和存储容量的大小</a></li><li class="sidebar-sub-header level3"><a href="/pages/658070/#密钥设置" class="sidebar-link">密钥设置</a></li><li class="sidebar-sub-header level3"><a href="/pages/658070/#设置安全组" class="sidebar-link">设置安全组</a></li></ul></li></ul></li><li><a href="/pages/8f805e/" class="sidebar-link">控制节点和计算节点都需要的操作</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>PowerShell</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>折腾</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E7%AC%94%E8%AE%B0%E5%92%8C%E6%8A%98%E8%85%BE" title="分类" data-v-06225672>笔记和折腾</a></li><li data-v-06225672><a href="/categories/?category=%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0" title="分类" data-v-06225672>技术笔记</a></li><li data-v-06225672><a href="/categories/?category=OpenStack" title="分类" data-v-06225672>OpenStack</a></li></ul> <div class="info" data-v-06225672><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-06-13</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">控制节点安装的软件<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="安装mariadb数据库-mysql的分支"><a href="#安装mariadb数据库-mysql的分支" class="header-anchor">#</a> <strong>安装mariadb数据库</strong>(mysql的分支)</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mariadb-server mariadb-client python3-pymysql
</code></pre></div><p>ps:</p> <p>可以不要mariadb-client</p> <p><strong>数据库配置</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vi</span> /etc/mysql/mariadb.conf.d/24-openstack.cnf
</code></pre></div><div class="language-ini extra-class"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">bind-address</span> <span class="token punctuation">=</span> <span class="token value attr-value">0.0.0.0</span>
<span class="token key attr-name">default-storage-engine</span> <span class="token punctuation">=</span> <span class="token value attr-value">innodb</span>
<span class="token key attr-name">innodb_file_per_table</span> <span class="token punctuation">=</span> <span class="token value attr-value">on</span>
<span class="token key attr-name">max_connections</span> <span class="token punctuation">=</span> <span class="token value attr-value">4096</span>
<span class="token key attr-name">collation-server</span> <span class="token punctuation">=</span> <span class="token value attr-value">utf8_general_ci</span>
<span class="token key attr-name">character-set-server</span> <span class="token punctuation">=</span> <span class="token value attr-value">utf8</span>
</code></pre></div><p><strong>重启数据库服务</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl restart mysql
</code></pre></div><p><strong>设置开机启动</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> mysql
</code></pre></div><p><strong>初始化数据库</strong> 一路yes 密码设置为123456</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> mysql_secure_installation
</code></pre></div><h2 id="安装message-queue"><a href="#安装message-queue" class="header-anchor">#</a> <strong>安装Message queue</strong></h2> <br> <p><strong>安装rabbitmq-server</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> rabbitmq-server
</code></pre></div><p><strong>添加用户</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>sudosudo rabbitmqctl add_user openstack RABBIT_PASS
</code></pre></div><p><strong>设置权限</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> rabbitmqctl set_permissions openstack <span class="token string">&quot;.*&quot;</span> <span class="token string">&quot;.*&quot;</span> <span class="token string">&quot;.*&quot;</span>
</code></pre></div><p><strong>加个插件</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> rabbitmq-plugins <span class="token builtin class-name">enable</span> rabbitmq_management 
</code></pre></div><p><strong>启动rabbitmq并设置开机启动</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl start rabbitmq-server
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> rabbitmq-server
</code></pre></div><h2 id="安装memcached"><a href="#安装memcached" class="header-anchor">#</a> <strong>安装Memcached</strong></h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> memcached python3-memcache
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vi</span> /etc/memcached.conf
</code></pre></div><p>找到 -l 127.0.0.1 改为:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token parameter variable">-l</span> <span class="token number">127.0</span>.0.1,::1,192.168.2.24
</code></pre></div><p>ps:192.168.2.24替换为你的控制节点的管理IP地址</p> <p><strong>重启服务</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl restart memcached
</code></pre></div><p><strong>修改 Memcached 的服务参数，避免开机时启动失败。</strong></p> <p>选项
After=network.target
修改为
After=network-online.target</p> <p>建议以注释的方式修改</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">vim</span> /usr/lib/systemd/system/memcached.service    

<span class="token comment"># 修改了 Memcached 启动参数 注意</span>
</code></pre></div><p><strong>启动 Memcached 服务并设置开机启动</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token function">sudo</span> systemctl daemon-reload???

<span class="token function">sudo</span> systemctl restart memcached

<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> memcached

<span class="token function">sudo</span> systemctl status memcached

</code></pre></div><h2 id="安装etcd"><a href="#安装etcd" class="header-anchor">#</a> <strong>安装etcd</strong></h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> etcd
</code></pre></div><p><strong>修改etcd配置文件</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">vi</span> /etc/default/etcd
</code></pre></div><div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">ETCD_NAME</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">controller124</span>&quot;</span>
<span class="token key attr-name">ETCD_DATA_DIR</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">/var/lib/etcd</span>&quot;</span>
<span class="token key attr-name">ETCD_INITIAL_CLUSTER_STATE</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">new</span>&quot;</span>
<span class="token key attr-name">ETCD_INITIAL_CLUSTER_TOKEN</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">etcd-cluster-01</span>&quot;</span>
<span class="token key attr-name">ETCD_INITIAL_CLUSTER</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">controller124=http://192.168.2.24:2380</span>&quot;</span>
<span class="token key attr-name">ETCD_INITIAL_ADVERTISE_PEER_URLS</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">http://192.168.2.24:2380</span>&quot;</span>
<span class="token key attr-name">ETCD_ADVERTISE_CLIENT_URLS</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">http://192.168.2.24:2379</span>&quot;</span>
<span class="token key attr-name">ETCD_LISTEN_PEER_URLS</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">http://0.0.0.0:2380</span>&quot;</span>
<span class="token key attr-name">ETCD_LISTEN_CLIENT_URLS</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">http://192.168.2.24:2379</span>&quot;</span>
</code></pre></div><p><strong>启动etcd并设置开机启动</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl restart etcd
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> etcd
</code></pre></div><p><strong>测试etcd</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>etcdctl <span class="token parameter variable">--endpoints</span><span class="token operator">=</span><span class="token string">&quot;http://controller124:2379&quot;</span> <span class="token builtin class-name">set</span> 001 法外狂徒张三

etcdctl <span class="token parameter variable">--endpoints</span><span class="token operator">=</span><span class="token string">&quot;http://controller124:2379&quot;</span> get 001
</code></pre></div><h2 id="安装keystone"><a href="#安装keystone" class="header-anchor">#</a> <strong>安装keystone</strong></h2> <p><strong>创建数据库</strong></p> <p>KEYSTONE_DBPASS为要设置的密码</p> <div class="language-sql extra-class"><pre class="language-sql"><code>mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> keystone<span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> keystone<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'keystone'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'KEYSTONE_DBPASS'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> keystone<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'keystone'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'KEYSTONE_DBPASS'</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> keystone<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">exit</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>安装组件</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> keystone
</code></pre></div><p><strong>编辑配置文件</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">vi</span> /etc/keystone/keystone.conf
</code></pre></div><div class="language-ini extra-class"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">database</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">connection</span> <span class="token punctuation">=</span> <span class="token value attr-value">mysql+pymysql://keystone:KEYSTONE_DBPASS@controller124/keystone</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">token</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">provider</span> <span class="token punctuation">=</span> <span class="token value attr-value">fernet</span>
</code></pre></div><p><strong>填充数据库：</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">su</span>
<span class="token builtin class-name">cd</span> /etc/keystone/
<span class="token function">su</span> <span class="token parameter variable">-s</span> /bin/sh <span class="token parameter variable">-c</span> <span class="token string">&quot;keystone-manage db_sync&quot;</span> keystone
</code></pre></div><p><strong>初始化密钥</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone
keystone-manage credential_setup --keystone-user keystone --keystone-group keystone
</code></pre></div><p><strong>创建引导服务</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> keystone-manage bootstrap --bootstrap-password ADMIN_PASS <span class="token punctuation">\</span>
  --bootstrap-admin-url http://controller124:5000/v3/ <span class="token punctuation">\</span>
  --bootstrap-internal-url http://controller124:5000/v3/ <span class="token punctuation">\</span>
  --bootstrap-public-url http://controller124:5000/v3/ <span class="token punctuation">\</span>
  --bootstrap-region-id RegionOne
</code></pre></div><p><strong>在</strong>/etc/apache2/apache2.conf<strong>查看</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vi</span> /etc/apache2/apache2.conf 
</code></pre></div><p>如果不存在
<code>ServerName controller</code>
这一行则在其中添加</p> <p>重启Apache</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> apache2
<span class="token function">sudo</span> systemctl restart apache2
</code></pre></div><p>查看Apache的服务状态</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl status apache2
</code></pre></div><p>source ./admin-openrc-fish.sh</p> <p><strong>进行一些确认和验证</strong></p> <p>查询刚创建的用户的ID</p> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack user list
</code></pre></div><p>复制上文的用户ID，关联项目admin，用户admin，角色admin。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack role <span class="token function">add</span> <span class="token parameter variable">--project</span> admin <span class="token parameter variable">--user</span> 替换为用户ID admin

<span class="token builtin class-name">source</span> ./admin-openrc-fish.sh
</code></pre></div><p>查看token，可以多运行几次，查看 token id 是否更新。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack token issue
</code></pre></div><p>清除环境变量后：</p> <p>使用 openstack 命令验证是否能够获取 Token</p> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack --os-auth-url http://controller124:5000/v3 <span class="token punctuation">\</span>
  --os-project-domain-name default --os-user-domain-name default <span class="token punctuation">\</span>
  --os-project-name admin --os-username admin --os-auth-type password <span class="token punctuation">\</span>
  --os-password ADMIN_PASS token issue
</code></pre></div><p>查询 keystone identity service，表里应该只有一行记录。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">source</span> /etc/keystone/admin-openrc
openstack <span class="token function">service</span> list <span class="token operator">|</span><span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token string">&quot;ID|keystone&quot;</span>
</code></pre></div><p>查询 keystone endpoint，表里应该有3行记录。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">source</span> /etc/keystone/admin-openrc
openstack endpoint list <span class="token operator">|</span><span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token string">&quot;ID|keystone&quot;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">bash</span> opst-proc-show.sh
</code></pre></div><h2 id="安装glance"><a href="#安装glance" class="header-anchor">#</a> 安装Glance</h2> <h4 id="创建数据库"><a href="#创建数据库" class="header-anchor">#</a> 创建数据库</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
CREATE DATABASE glance<span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON glance.* TO <span class="token string">'glance'</span>@<span class="token string">'localhost'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'GLANCE_DBPASS'</span><span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON glance.* TO <span class="token string">'glance'</span>@<span class="token string">'%'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'GLANCE_DBPASS'</span><span class="token punctuation">;</span>
<span class="token builtin class-name">exit</span><span class="token punctuation">;</span>
</code></pre></div><p>GLANCE_DBPASS为要设置的密码</p> <h4 id="创建glance用户"><a href="#创建glance用户" class="header-anchor">#</a> 创建glance用户</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">source</span> ./admin-openrc-fish.sh
openstack user create <span class="token parameter variable">--domain</span> default <span class="token parameter variable">--password</span> GLANCE_PASS glance
</code></pre></div><h4 id="将glacne添加到admin中去"><a href="#将glacne添加到admin中去" class="header-anchor">#</a> 将glacne添加到admin中去</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack project create <span class="token parameter variable">--domain</span> default <span class="token parameter variable">--description</span> <span class="token string">&quot;Service Project&quot;</span> <span class="token function">service</span>
openstack role <span class="token function">add</span> <span class="token parameter variable">--project</span> <span class="token function">service</span> <span class="token parameter variable">--user</span> glance admin
openstack user create <span class="token parameter variable">--domain</span> default <span class="token parameter variable">--password</span> MY_PASSWORD MY_SERVICE
openstack role <span class="token function">add</span> <span class="token parameter variable">--user</span> MY_SERVICE --user-domain Default <span class="token parameter variable">--system</span> all reader
</code></pre></div><h4 id="创建glance服务实体"><a href="#创建glance服务实体" class="header-anchor">#</a> 创建glance服务实体</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack <span class="token function">service</span> create <span class="token parameter variable">--name</span> glance <span class="token punctuation">\</span>
  <span class="token parameter variable">--description</span> <span class="token string">&quot;OpenStack Image&quot;</span> image
</code></pre></div><h4 id="创建image服务api端点"><a href="#创建image服务api端点" class="header-anchor">#</a> 创建Image服务API端点</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack endpoint create <span class="token parameter variable">--region</span> RegionOne <span class="token punctuation">\</span>
  image public http://controller124:9292
openstack endpoint create <span class="token parameter variable">--region</span> RegionOne <span class="token punctuation">\</span>
  image internal http://controller124:9292
openstack endpoint create <span class="token parameter variable">--region</span> RegionOne <span class="token punctuation">\</span>
  image admin http://controller124:9292
</code></pre></div><h4 id="安装组件"><a href="#安装组件" class="header-anchor">#</a> 安装组件</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">apt</span> <span class="token function">install</span> glance <span class="token parameter variable">-y</span>
</code></pre></div><h4 id="配置组件"><a href="#配置组件" class="header-anchor">#</a> 配置组件</h4> <div class="language-ini extra-class"><pre class="language-ini"><code>vim /etc/glance/glance-api.conf
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">DEFAULT</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">use_keystone_quotas</span> <span class="token punctuation">=</span> <span class="token value attr-value">True</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">barbican</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">barbican_service_user</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">cinder</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">cors</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">database</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">connection</span> <span class="token punctuation">=</span> <span class="token value attr-value">mysql+pymysql://glance:GLANCE_DBPASS@controller124/glance</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">file</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">glance.store.http.store</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">glance.store.rbd.store</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">glance.store.s3.store</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">glance.store.swift.store</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">glance.store.vmware_datastore.store</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">glance_store</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">stores</span> <span class="token punctuation">=</span> <span class="token value attr-value">file,http</span>
<span class="token key attr-name">default_store</span> <span class="token punctuation">=</span> <span class="token value attr-value">file</span>
<span class="token key attr-name">filesystem_store_datadir</span> <span class="token punctuation">=</span> <span class="token value attr-value">/var/lib/glance/images/</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">healthcheck</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">image_format</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">key_manager</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">keystone_authtoken</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">auth_url</span> <span class="token punctuation">=</span> <span class="token value attr-value">http://controller124:5000</span>
<span class="token key attr-name">www_authenticate_uri</span> <span class="token punctuation">=</span> <span class="token value attr-value">http://controller124:5000</span>
<span class="token key attr-name">memcached_servers</span> <span class="token punctuation">=</span> <span class="token value attr-value">controller124:11211</span>
<span class="token key attr-name">auth_type</span> <span class="token punctuation">=</span> <span class="token value attr-value">password</span>
<span class="token key attr-name">project_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">default</span>
<span class="token key attr-name">user_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">default</span>
<span class="token key attr-name">project_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">service</span>
<span class="token key attr-name">username</span> <span class="token punctuation">=</span> <span class="token value attr-value">glance</span>
<span class="token key attr-name">password</span> <span class="token punctuation">=</span> <span class="token value attr-value">GLANCE_PASS</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_concurrency</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_messaging_amqp</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_messaging_kafka</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_messaging_notifications</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_messaging_rabbit</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_middleware</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_policy</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_reports</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">paste_deploy</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">flavor</span> <span class="token punctuation">=</span> <span class="token value attr-value">keystone</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">profiler</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">store_type_location_strategy</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">task</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">taskflow_executor</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">vault</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">wsgi</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_limit</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">auth_url</span> <span class="token punctuation">=</span> <span class="token value attr-value">http://controller124:5000</span>
<span class="token key attr-name">auth_type</span> <span class="token punctuation">=</span> <span class="token value attr-value">password</span>
<span class="token key attr-name">user_domain_id</span> <span class="token punctuation">=</span> <span class="token value attr-value">default</span>
<span class="token key attr-name">username</span> <span class="token punctuation">=</span> <span class="token value attr-value">MY_SERVICE</span>
<span class="token key attr-name">system_scope</span> <span class="token punctuation">=</span> <span class="token value attr-value">all</span>
<span class="token key attr-name">password</span> <span class="token punctuation">=</span> <span class="token value attr-value">MY_PASSWORD</span>
<span class="token key attr-name">endpoint_id</span> <span class="token punctuation">=</span> <span class="token value attr-value">ENDPOINT_ID</span>
<span class="token key attr-name">region_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">RegionOne</span>
</code></pre></div><p>GLANCE_DBPASS为创建glance用户访问数据库的密码</p> <p>GLANCE_PASS为openstack创建glance用户设置的密码</p> <p>GLANCE_PASS为openstack创建glance用户设置的密码</p> <p>endpoint_id为创建Image服务API端点中类型为public的id
可以通过如下的命令查看</p> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack endpoint list
</code></pre></div><h4 id="填充数据库"><a href="#填充数据库" class="header-anchor">#</a> 填充数据库</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span>
<span class="token builtin class-name">cd</span> /etc/glance
<span class="token function">su</span> <span class="token parameter variable">-s</span> /bin/sh <span class="token parameter variable">-c</span> <span class="token string">&quot;glance-manage db_sync&quot;</span> glance
</code></pre></div><p>运行成功会显示<code>Database is synced successfully.</code></p> <p>进入 MariaDB 查看是否有表格出现。密码为<code>GLANCE_DBPASS</code>。如果有则表示数据库同步成功。</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">mysql</span> -u glance -p
use glance</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">show</span> tables</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="重启image服务"><a href="#重启image服务" class="header-anchor">#</a> 重启Image服务</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl restart glance-api
</code></pre></div><p>查看 Glance 服务是否active。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl status openstack-glance-api
</code></pre></div><h4 id="验证配置"><a href="#验证配置" class="header-anchor">#</a> 验证配置</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">source</span> ./admin-openrc-fish.sh
<span class="token function">wget</span> http://download.cirros-cloud.net/0.4.0/cirros-0.4.0-x86_64-disk.img
glance image-create <span class="token parameter variable">--name</span> <span class="token string">&quot;cirros&quot;</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--file</span> /root/cirros-0.4.0-x86_64-disk.img <span class="token punctuation">\</span>
  --disk-format qcow2 --container-format bare <span class="token punctuation">\</span>
  <span class="token parameter variable">--visibility</span><span class="token operator">=</span>public
glance image-list
<span class="token comment"># 输出如下的内容表示组件成功运行</span>
root@controller124:~<span class="token comment"># glance image-list</span>
+--------------------------------------+--------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Name   <span class="token operator">|</span>
+--------------------------------------+--------+
<span class="token operator">|</span> 8244fbc0-f798-44c5-b0f3-9e5566e7e345 <span class="token operator">|</span> cirros <span class="token operator">|</span>
+--------------------------------------+--------+
</code></pre></div><h2 id="安装placement"><a href="#安装placement" class="header-anchor">#</a> 安装Placement</h2> <h4 id="创建数据库-2"><a href="#创建数据库-2" class="header-anchor">#</a> 创建数据库</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
CREATE DATABASE placement<span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON placement.* TO <span class="token string">'placement'</span>@<span class="token string">'localhost'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'PLACEMENT_DBPASS'</span><span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON placement.* TO <span class="token string">'placement'</span>@<span class="token string">'%'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'PLACEMENT_DBPASS'</span><span class="token punctuation">;</span>
<span class="token builtin class-name">exit</span><span class="token punctuation">;</span>
</code></pre></div><p>PLACEMENT_DBPASS为要设置的密码</p> <p>创建placement用户</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">source</span> ./admin-openrc-fish.sh
openstack user create <span class="token parameter variable">--domain</span> default <span class="token parameter variable">--password</span> PLACEMENT_PASS placement
</code></pre></div><h4 id="将用户添加到admin"><a href="#将用户添加到admin" class="header-anchor">#</a> 将用户添加到admin</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack role <span class="token function">add</span> <span class="token parameter variable">--project</span> <span class="token function">service</span> <span class="token parameter variable">--user</span> placement admin 
</code></pre></div><h4 id="创建placement服务实体"><a href="#创建placement服务实体" class="header-anchor">#</a> 创建placement服务实体</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack <span class="token function">service</span> create <span class="token parameter variable">--name</span> placement <span class="token parameter variable">--description</span> <span class="token string">&quot;Placement API&quot;</span> placement
</code></pre></div><h4 id="创建api-服务端点"><a href="#创建api-服务端点" class="header-anchor">#</a> 创建API 服务端点</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack endpoint create <span class="token parameter variable">--region</span> RegionOne placement public http://controller124:8778
openstack endpoint create <span class="token parameter variable">--region</span> RegionOne placement internal http://controller124:8778
openstack endpoint create <span class="token parameter variable">--region</span> RegionOne placement admin http://controller124:8778
</code></pre></div><h4 id="安装组件-2"><a href="#安装组件-2" class="header-anchor">#</a> 安装组件</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">apt</span> <span class="token function">install</span> placement-api <span class="token parameter variable">-y</span>
</code></pre></div><h4 id="配置组件-2"><a href="#配置组件-2" class="header-anchor">#</a> 配置组件</h4> <div class="language-ini extra-class"><pre class="language-ini"><code>vim /etc/placement/placement.conf
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">DEFAULT</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">api</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">cors</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">keystone_authtoken</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">auth_url</span> <span class="token punctuation">=</span> <span class="token value attr-value">http://controller124:5000/v3</span>
<span class="token key attr-name">memcached_servers</span> <span class="token punctuation">=</span> <span class="token value attr-value">controller124:11211</span>
<span class="token key attr-name">auth_type</span> <span class="token punctuation">=</span> <span class="token value attr-value">password</span>
<span class="token key attr-name">project_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">Default</span>
<span class="token key attr-name">user_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">Default</span>
<span class="token key attr-name">project_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">service</span>
<span class="token key attr-name">username</span> <span class="token punctuation">=</span> <span class="token value attr-value">placement</span>
<span class="token key attr-name">password</span> <span class="token punctuation">=</span> <span class="token value attr-value">PLACEMENT_PASS</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_middleware</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_policy</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">placement</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">placement_database</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">connection</span> <span class="token punctuation">=</span> <span class="token value attr-value">mysql+pymysql://placement:PLACEMENT_DBPASS@controller124/placement</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">profiler</span><span class="token punctuation">]</span></span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">auth_strategy</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">keystone</span> <span class="token punctuation">=</span> 
</code></pre></div><p>PLACEMENT_DBPASS为创建placement用户访问数据库设置的密码</p> <p>PLACEMENT_PASS为openstack创建placement用户设置的密码</p> <h4 id="填充数据库-2"><a href="#填充数据库-2" class="header-anchor">#</a> 填充数据库</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span>
<span class="token function">su</span> <span class="token parameter variable">-s</span> /bin/sh <span class="token parameter variable">-c</span> <span class="token string">&quot;placement-manage db sync&quot;</span> placement
</code></pre></div><h4 id="重启apache2服务"><a href="#重启apache2服务" class="header-anchor">#</a> 重启apache2服务</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl restart apache2
</code></pre></div><p>进入 MariaDB 查看是否有表格出现。密码为<code>PLACEMENT_DBPASS</code>。如果有则表示数据库同步成功。</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">mysql</span> -u placement -pPLACEMENT_DBPASS
use placement</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">show</span> tables</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">exit</span></span><span class="token punctuation">;</span>
</code></pre></div><p><strong>验证配置</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">source</span> ./admin-openrc-fish.sh
placement-status upgrade check
<span class="token comment"># 输出如下的内容表示成功</span>
root@controller124:~<span class="token comment"># placement-status upgrade check</span>
+-------------------------------------------+
<span class="token operator">|</span> Upgrade Check Results                     <span class="token operator">|</span>
+-------------------------------------------+
<span class="token operator">|</span> Check: Missing Root Provider IDs          <span class="token operator">|</span>
<span class="token operator">|</span> Result: Success                           <span class="token operator">|</span>
<span class="token operator">|</span> Details: None                             <span class="token operator">|</span>
+-------------------------------------------+
<span class="token operator">|</span> Check: Incomplete Consumers               <span class="token operator">|</span>
<span class="token operator">|</span> Result: Success                           <span class="token operator">|</span>
<span class="token operator">|</span> Details: None                             <span class="token operator">|</span>
+-------------------------------------------+
<span class="token operator">|</span> Check: Policy File JSON to YAML Migration <span class="token operator">|</span>
<span class="token operator">|</span> Result: Success                           <span class="token operator">|</span>
<span class="token operator">|</span> Details: None                             <span class="token operator">|</span>
+-------------------------------------------+
openstack --os-placement-api-version <span class="token number">1.2</span> resource class list --sort-column name
<span class="token comment"># 输出如下的内容表示成功</span>
root@controller124:~<span class="token comment"># openstack --os-placement-api-version 1.2 resource class list --sort-column name</span>
+----------------------------------------+
<span class="token operator">|</span> name                                   <span class="token operator">|</span>
+----------------------------------------+
<span class="token operator">|</span> DISK_GB                                <span class="token operator">|</span>
<span class="token operator">|</span> FPGA                                   <span class="token operator">|</span>
<span class="token operator">|</span> IPV4_ADDRESS                           <span class="token operator">|</span>
<span class="token operator">|</span> MEMORY_MB                              <span class="token operator">|</span>
<span class="token operator">|</span> MEM_ENCRYPTION_CONTEXT                 <span class="token operator">|</span>
<span class="token operator">|</span> NET_BW_EGR_KILOBIT_PER_SEC             <span class="token operator">|</span>
<span class="token operator">|</span> NET_BW_IGR_KILOBIT_PER_SEC             <span class="token operator">|</span>
<span class="token operator">|</span> NET_PACKET_RATE_EGR_KILOPACKET_PER_SEC <span class="token operator">|</span>
<span class="token operator">|</span> NET_PACKET_RATE_IGR_KILOPACKET_PER_SEC <span class="token operator">|</span>
<span class="token operator">|</span> NET_PACKET_RATE_KILOPACKET_PER_SEC     <span class="token operator">|</span>
<span class="token operator">|</span> NUMA_CORE                              <span class="token operator">|</span>
<span class="token operator">|</span> NUMA_MEMORY_MB                         <span class="token operator">|</span>
<span class="token operator">|</span> NUMA_SOCKET                            <span class="token operator">|</span>
<span class="token operator">|</span> NUMA_THREAD                            <span class="token operator">|</span>
<span class="token operator">|</span> PCI_DEVICE                             <span class="token operator">|</span>
<span class="token operator">|</span> PCPU                                   <span class="token operator">|</span>
<span class="token operator">|</span> PGPU                                   <span class="token operator">|</span>
<span class="token operator">|</span> SRIOV_NET_VF                           <span class="token operator">|</span>
<span class="token operator">|</span> VCPU                                   <span class="token operator">|</span>
<span class="token operator">|</span> VGPU                                   <span class="token operator">|</span>
<span class="token operator">|</span> VGPU_DISPLAY_HEAD                      <span class="token operator">|</span>
+----------------------------------------+
openstack --os-placement-api-version <span class="token number">1.6</span> trait list --sort-column name
</code></pre></div><h2 id="安装nova"><a href="#安装nova" class="header-anchor">#</a> 安装Nova</h2> <h4 id="创建数据库-3"><a href="#创建数据库-3" class="header-anchor">#</a> 创建数据库</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>mysql
CREATE DATABASE nova_api<span class="token punctuation">;</span>
CREATE DATABASE nova<span class="token punctuation">;</span>
CREATE DATABASE nova_cell0<span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON nova_api.* TO <span class="token string">'nova'</span>@<span class="token string">'localhost'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'NOVA_DBPASS'</span><span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON nova_api.* TO <span class="token string">'nova'</span>@<span class="token string">'%'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'NOVA_DBPASS'</span><span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON nova.* TO <span class="token string">'nova'</span>@<span class="token string">'localhost'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'NOVA_DBPASS'</span><span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON nova.* TO <span class="token string">'nova'</span>@<span class="token string">'%'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'NOVA_DBPASS'</span><span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON nova_cell0.* TO <span class="token string">'nova'</span>@<span class="token string">'localhost'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'NOVA_DBPASS'</span><span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON nova_cell0.* TO <span class="token string">'nova'</span>@<span class="token string">'%'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'NOVA_DBPASS'</span><span class="token punctuation">;</span>
<span class="token builtin class-name">exit</span>
</code></pre></div><p>NOVA_DBPASS为要设置的密码</p> <p><strong>创建nova用户</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>admin-openrc.sh
openstack user create <span class="token parameter variable">--domain</span> default --password-prompt nova
</code></pre></div><h4 id="添加到admin"><a href="#添加到admin" class="header-anchor">#</a> 添加到admin</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack role <span class="token function">add</span> <span class="token parameter variable">--project</span> <span class="token function">service</span> <span class="token parameter variable">--user</span> nova admin
</code></pre></div><h4 id="创建nova服务实体"><a href="#创建nova服务实体" class="header-anchor">#</a> 创建nova服务实体</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack <span class="token function">service</span> create <span class="token parameter variable">--name</span> nova <span class="token punctuation">\</span>
  <span class="token parameter variable">--description</span> <span class="token string">&quot;OpenStack Compute&quot;</span> compute
</code></pre></div><h4 id="创建api服务端点"><a href="#创建api服务端点" class="header-anchor">#</a> 创建API服务端点</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack endpoint create <span class="token parameter variable">--region</span> RegionOne <span class="token punctuation">\</span>
  compute public http://controller124:8774/v2.1
openstack endpoint create <span class="token parameter variable">--region</span> RegionOne <span class="token punctuation">\</span>
  compute internal http://controller124:8774/v2.1
openstack endpoint create <span class="token parameter variable">--region</span> RegionOne <span class="token punctuation">\</span>
  compute admin http://controller124:8774/v2.1
</code></pre></div><h4 id="安装组件-3"><a href="#安装组件-3" class="header-anchor">#</a> 安装组件</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">apt</span> <span class="token function">install</span> nova-api nova-conductor nova-novncproxy nova-scheduler
</code></pre></div><h4 id="配置组件-3"><a href="#配置组件-3" class="header-anchor">#</a> 配置组件</h4> <div class="language-ini extra-class"><pre class="language-ini"><code>vim /etc/nova/nova.conf
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">DEFAULT</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">enabled_apis</span> <span class="token punctuation">=</span> <span class="token value attr-value">osapi_compute,metadata</span>
<span class="token key attr-name">rpc_backend</span> <span class="token punctuation">=</span> <span class="token value attr-value">rabbit</span>
<span class="token key attr-name">auth_strategy</span> <span class="token punctuation">=</span> <span class="token value attr-value">keystone</span>
<span class="token key attr-name">my_ip</span> <span class="token punctuation">=</span> <span class="token value attr-value">192.168.2.24</span>
<span class="token key attr-name">use_neutron</span> <span class="token punctuation">=</span> <span class="token value attr-value">True</span>
<span class="token key attr-name">firewall_driver</span> <span class="token punctuation">=</span> <span class="token value attr-value">nova.virt.firewall.NoopFirewallDriver</span>
<span class="token key attr-name">transport_url</span> <span class="token punctuation">=</span> <span class="token value attr-value">rabbit://openstack:RABBIT_PASS@controller124:5672/</span>
<span class="token key attr-name">verbose</span> <span class="token punctuation">=</span> <span class="token value attr-value">True</span>
<span class="token key attr-name">debug</span> <span class="token punctuation">=</span> <span class="token value attr-value">True</span>
<span class="token key attr-name">log_dir</span> <span class="token punctuation">=</span> <span class="token value attr-value">/var/log/nova</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">api</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">auth_strategy</span> <span class="token punctuation">=</span> <span class="token value attr-value">keystone</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">api_database</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">connection</span> <span class="token punctuation">=</span> <span class="token value attr-value">mysql+pymysql://nova:NOVA_DBPASS@controller124/nova_api</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">barbican</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">barbican_service_user</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">cache</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">cinder</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">compute</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">conductor</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">console</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">consoleauth</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">cors</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">cyborg</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">database</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">connection</span> <span class="token punctuation">=</span> <span class="token value attr-value">mysql+pymysql://nova:NOVA_DBPASS@controller124/nova</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">devices</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">ephemeral_storage_encryption</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">filter_scheduler</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">glance</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">api_servers</span> <span class="token punctuation">=</span> <span class="token value attr-value">http://controller124:9292</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">guestfs</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">healthcheck</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">hyperv</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">image_cache</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">ironic</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">key_manager</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">keystone</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">keystone_authtoken</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">www_authenticate_uri</span> <span class="token punctuation">=</span> <span class="token value attr-value">http://controller124:5000</span>
<span class="token key attr-name">auth_url</span> <span class="token punctuation">=</span> <span class="token value attr-value">http://controller124:5000</span>
<span class="token key attr-name">memcached_servers</span> <span class="token punctuation">=</span> <span class="token value attr-value">controller124:11211</span>
<span class="token key attr-name">auth_type</span> <span class="token punctuation">=</span> <span class="token value attr-value">password</span>
<span class="token key attr-name">project_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">Default</span>
<span class="token key attr-name">user_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">Default</span>
<span class="token key attr-name">project_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">service</span>
<span class="token key attr-name">username</span> <span class="token punctuation">=</span> <span class="token value attr-value">nova</span>
<span class="token key attr-name">password</span> <span class="token punctuation">=</span> <span class="token value attr-value">NOVA_PASS</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">libvirt</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">metrics</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mks</span><span class="token punctuation">]</span></span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">neutron</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">auth_url</span> <span class="token punctuation">=</span> <span class="token value attr-value">http://controller124:5000</span>
<span class="token key attr-name">auth_type</span> <span class="token punctuation">=</span> <span class="token value attr-value">password</span>
<span class="token key attr-name">project_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">Default</span>
<span class="token key attr-name">user_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">Default</span>
<span class="token key attr-name">region_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">RegionOne</span>
<span class="token key attr-name">project_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">service</span>
<span class="token key attr-name">username</span> <span class="token punctuation">=</span> <span class="token value attr-value">neutron</span>
<span class="token key attr-name">password</span> <span class="token punctuation">=</span> <span class="token value attr-value">NEUTRON_PASS</span>
<span class="token key attr-name">service_metadata_proxy</span> <span class="token punctuation">=</span> <span class="token value attr-value">True</span>
<span class="token key attr-name">metadata_proxy_shared_secret</span> <span class="token punctuation">=</span> <span class="token value attr-value">METADATA_PASS</span>
<span class="token key attr-name">insecure</span> <span class="token punctuation">=</span> <span class="token value attr-value">false</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">notifications</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_concurrency</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">lock_path</span> <span class="token punctuation">=</span> <span class="token value attr-value">/var/lib/nova/tmp</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_messaging_amqp</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_messaging_kafka</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_messaging_notifications</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_messaging_rabbit</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_middleware</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_policy</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">oslo_reports</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">pci</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">placement</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">region_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">RegionOne</span>
<span class="token key attr-name">project_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">Default</span>
<span class="token key attr-name">project_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">service</span>
<span class="token key attr-name">auth_type</span> <span class="token punctuation">=</span> <span class="token value attr-value">password</span>
<span class="token key attr-name">user_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">Default</span>
<span class="token key attr-name">auth_url</span> <span class="token punctuation">=</span> <span class="token value attr-value">http://controller124:5000/v3</span>
<span class="token key attr-name">username</span> <span class="token punctuation">=</span> <span class="token value attr-value">placement</span>
<span class="token key attr-name">password</span> <span class="token punctuation">=</span> <span class="token value attr-value">PLACEMENT_PASS</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">powervm</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">privsep</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">profiler</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">quota</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">rdp</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">remote_debug</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">scheduler</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">serial_console</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">service_user</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">send_service_user_token</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">auth_url</span> <span class="token punctuation">=</span> <span class="token value attr-value">http://controller124:5000/identity</span>
<span class="token key attr-name">auth_strategy</span> <span class="token punctuation">=</span> <span class="token value attr-value">keystone</span>
<span class="token key attr-name">auth_type</span> <span class="token punctuation">=</span> <span class="token value attr-value">password</span>
<span class="token key attr-name">project_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">Default</span>
<span class="token key attr-name">project_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">service</span>
<span class="token key attr-name">user_domain_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">Default</span>
<span class="token key attr-name">username</span> <span class="token punctuation">=</span> <span class="token value attr-value">nova</span>
<span class="token key attr-name">password</span> <span class="token punctuation">=</span> <span class="token value attr-value">NOVA_PASS</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">spice</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">upgrade_levels</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">vault</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">vendordata_dynamic_auth</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">vmware</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">vnc</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">enabled</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">server_listen</span> <span class="token punctuation">=</span> <span class="token value attr-value">$my_ip</span>
<span class="token key attr-name">server_proxyclient_address</span> <span class="token punctuation">=</span> <span class="token value attr-value">$my_ip</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">workarounds</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">wsgi</span><span class="token punctuation">]</span></span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">zvm</span><span class="token punctuation">]</span></span>
</code></pre></div><p>NOVA_DBPASS为创建nova用户设置访问数据库的密码</p> <p>NOVA_DBPASS为创建nova用户设置访问数据库的密码</p> <p>RABBIT_PASS为rabbitmqctl创建openstack设置的密码
my_ip为Controller节点的IP地址</p> <p>NOVA_PASS为openstack创建nova用户设置的密码</p> <p>NOVA_PASS为openstack创建nova用户设置的密码</p> <p>PLACEMENT_PASS为openstack创建placement用户设置的密码</p> <h4 id="填充数据库-3"><a href="#填充数据库-3" class="header-anchor">#</a> 填充数据库</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">su</span> <span class="token parameter variable">-s</span> /bin/sh <span class="token parameter variable">-c</span> <span class="token string">&quot;nova-manage api_db sync&quot;</span> nova
<span class="token function">su</span> <span class="token parameter variable">-s</span> /bin/sh <span class="token parameter variable">-c</span> <span class="token string">&quot;nova-manage cell_v2 map_cell0&quot;</span> nova
<span class="token function">su</span> <span class="token parameter variable">-s</span> /bin/sh <span class="token parameter variable">-c</span> <span class="token string">&quot;nova-manage cell_v2 create_cell --name=cell1 --verbose&quot;</span> nova
<span class="token function">su</span> <span class="token parameter variable">-s</span> /bin/sh <span class="token parameter variable">-c</span> <span class="token string">&quot;nova-manage db sync&quot;</span> nova
</code></pre></div><h4 id="验证"><a href="#验证" class="header-anchor">#</a> 验证</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">su</span> <span class="token parameter variable">-s</span> /bin/sh <span class="token parameter variable">-c</span> <span class="token string">&quot;nova-manage cell_v2 list_cells&quot;</span> nova
<span class="token number">1</span>
<span class="token comment"># 输出类似如下的内容</span>
root@controller124:~<span class="token comment"># su -s /bin/sh -c &quot;nova-manage cell_v2 list_cells&quot; nova</span>
+-------+--------------------------------------+------------------------------------------+-------------------------------------------------+----------+
<span class="token operator">|</span>  Name <span class="token operator">|</span>                 UUID                 <span class="token operator">|</span>              Transport URL               <span class="token operator">|</span>               Database Connection               <span class="token operator">|</span> Disabled <span class="token operator">|</span>
+-------+--------------------------------------+------------------------------------------+-------------------------------------------------+----------+
<span class="token operator">|</span> cell0 <span class="token operator">|</span> 00000000-0000-0000-0000-000000000000 <span class="token operator">|</span>                  none:/                  <span class="token operator">|</span> mysql+pymysql://nova:****@controller124/nova_cell0 <span class="token operator">|</span>  False   <span class="token operator">|</span>
<span class="token operator">|</span> cell1 <span class="token operator">|</span> e52327df-10e2-41e1-a1d2-5d7724a85688 <span class="token operator">|</span> rabbit://openstack:****@controller124:5672/ <span class="token operator">|</span>    mysql+pymysql://nova:****@controller124/nova    <span class="token operator">|</span>  False   <span class="token operator">|</span>
+-------+--------------------------------------+------------------------------------------+-------------------------------------------------+----------+
</code></pre></div><h4 id="重启服务"><a href="#重启服务" class="header-anchor">#</a> 重启服务</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl restart nova-api nova-scheduler nova-conductor nova-novncproxy
</code></pre></div><h3 id="配置compute节点"><a href="#配置compute节点" class="header-anchor">#</a> 配置Compute节点</h3> <h3 id="compute节点配置完成后"><a href="#compute节点配置完成后" class="header-anchor">#</a> Compute节点配置完成后....</h3> <h3 id="在控制节点添加计算节点"><a href="#在控制节点添加计算节点" class="header-anchor">#</a> 在控制节点添加计算节点</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">source</span> ./admin-openrc-fish.sh
openstack compute <span class="token function">service</span> list <span class="token parameter variable">--service</span> nova-compute
<span class="token comment"># 输出如下的内容</span>
root@controller124:~<span class="token comment"># openstack compute service list --service nova-compute</span>
+--------------------------------------+--------------+----------+------+---------+-------+----------------------------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Binary       <span class="token operator">|</span> Host     <span class="token operator">|</span> Zone <span class="token operator">|</span> Status  <span class="token operator">|</span> State <span class="token operator">|</span> Updated At                 <span class="token operator">|</span>
+--------------------------------------+--------------+----------+------+---------+-------+----------------------------+
<span class="token operator">|</span> c9dd606c-0f31-4a9e-9c6f-bb40e33cf054 <span class="token operator">|</span> nova-compute <span class="token operator">|</span> compute124 <span class="token operator">|</span> nova <span class="token operator">|</span> enabled <span class="token operator">|</span> up    <span class="token operator">|</span> <span class="token number">2024</span>-03-31T08:01:53.000000 <span class="token operator">|</span>
+--------------------------------------+--------------+----------+------+---------+-------+----------------------------+
<span class="token function">su</span> <span class="token parameter variable">-s</span> /bin/sh <span class="token parameter variable">-c</span> <span class="token string">&quot;nova-manage cell_v2 discover_hosts --verbose&quot;</span> nova
<span class="token comment"># 输出如下的内容</span>
root@controller124:~<span class="token comment"># su -s /bin/sh -c &quot;nova-manage cell_v2 discover_hosts --verbose&quot; nova</span>
Found <span class="token number">2</span> cell mappings.
Skipping cell0 since it does not contain hosts.
Getting computes from cell <span class="token string">'cell1'</span><span class="token builtin class-name">:</span> e52327df-10e2-41e1-a1d2-5d7724a85688
Checking <span class="token function">host</span> mapping <span class="token keyword">for</span> compute <span class="token function">host</span> <span class="token string">'compute1'</span><span class="token builtin class-name">:</span> 844b86c1-7310-4ddf-82cd-0b8f3350ef0d
Creating <span class="token function">host</span> mapping <span class="token keyword">for</span> compute <span class="token function">host</span> <span class="token string">'compute1'</span><span class="token builtin class-name">:</span> 844b86c1-7310-4ddf-82cd-0b8f3350ef0d
Found <span class="token number">1</span> unmapped computes <span class="token keyword">in</span> cell: e52327df-10e2-41e1-a1d2-5d7724a85688
</code></pre></div><h3 id="验证配置-2"><a href="#验证配置-2" class="header-anchor">#</a> 验证配置</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack compute <span class="token function">service</span> list
<span class="token comment"># 输出如下的内容</span>
root@controller124:~<span class="token comment"># openstack compute service list</span>
+--------------------------------------+----------------+------------+----------+---------+-------+----------------------------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Binary         <span class="token operator">|</span> Host       <span class="token operator">|</span> Zone     <span class="token operator">|</span> Status  <span class="token operator">|</span> State <span class="token operator">|</span> Updated At                 <span class="token operator">|</span>
+--------------------------------------+----------------+------------+----------+---------+-------+----------------------------+
<span class="token operator">|</span> 2779af9c-cde5-41a6-87b2-5b6840d9b88b <span class="token operator">|</span> nova-conductor <span class="token operator">|</span> controller124 <span class="token operator">|</span> internal <span class="token operator">|</span> enabled <span class="token operator">|</span> up    <span class="token operator">|</span> <span class="token number">2024</span>-03-31T08:03:07.000000 <span class="token operator">|</span>
<span class="token operator">|</span> b24be4f1-ea05-4ee3-a7eb-8402ff53f172 <span class="token operator">|</span> nova-scheduler <span class="token operator">|</span> controller124 <span class="token operator">|</span> internal <span class="token operator">|</span> enabled <span class="token operator">|</span> up    <span class="token operator">|</span> <span class="token number">2024</span>-03-31T08:03:15.000000 <span class="token operator">|</span>
<span class="token operator">|</span> c9dd606c-0f31-4a9e-9c6f-bb40e33cf054 <span class="token operator">|</span> nova-compute   <span class="token operator">|</span> compute124   <span class="token operator">|</span> nova     <span class="token operator">|</span> enabled <span class="token operator">|</span> up    <span class="token operator">|</span> <span class="token number">2024</span>-03-31T08:03:13.000000 <span class="token operator">|</span>
+--------------------------------------+----------------+------------+----------+---------+-------+----------------------------+
openstack catalog list
openstack image list
nova-status upgrade check
</code></pre></div><h2 id="安装neutron-使用的是ovn"><a href="#安装neutron-使用的是ovn" class="header-anchor">#</a> 安装Neutron（使用的是OVN）</h2> <h4 id="创建数据库-4"><a href="#创建数据库-4" class="header-anchor">#</a> 创建数据库</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>mysql
CREATE DATABASE neutron<span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON neutron.* TO <span class="token string">'neutron'</span>@<span class="token string">'localhost'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'NEUTRON_DBPASS'</span><span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON neutron.* TO <span class="token string">'neutron'</span>@<span class="token string">'%'</span> <span class="token punctuation">\</span>
  IDENTIFIED BY <span class="token string">'NEUTRON_DBPASS'</span><span class="token punctuation">;</span>
<span class="token builtin class-name">exit</span><span class="token punctuation">;</span>
</code></pre></div><p>NEUTRON_DBPASS为要设置的密码</p> <h4 id="创建neutron用户"><a href="#创建neutron用户" class="header-anchor">#</a> 创建neutron用户</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">source</span> ./admin-openrc-fish.sh
openstack user create <span class="token parameter variable">--domain</span> default --password-prompt neutron
</code></pre></div><h4 id="添加到admin-2"><a href="#添加到admin-2" class="header-anchor">#</a> 添加到admin</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack role <span class="token function">add</span> <span class="token parameter variable">--project</span> <span class="token function">service</span> <span class="token parameter variable">--user</span> neutron admin
</code></pre></div><h4 id="创建neutron服务实体"><a href="#创建neutron服务实体" class="header-anchor">#</a> 创建neutron服务实体</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack <span class="token function">service</span> create <span class="token parameter variable">--name</span> neutron <span class="token punctuation">\</span>
  <span class="token parameter variable">--description</span> <span class="token string">&quot;OpenStack Networking&quot;</span> network
</code></pre></div><h4 id="创建api端点"><a href="#创建api端点" class="header-anchor">#</a> 创建API端点</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack endpoint create <span class="token parameter variable">--region</span> RegionOne <span class="token punctuation">\</span>
  network public http://controller124:9696
openstack endpoint create <span class="token parameter variable">--region</span> RegionOne <span class="token punctuation">\</span>
  network internal http://controller124:9696
openstack endpoint create <span class="token parameter variable">--region</span> RegionOne <span class="token punctuation">\</span>
  network admin http://controller124:9696
</code></pre></div><h4 id="安装组件-4"><a href="#安装组件-4" class="header-anchor">#</a> 安装组件</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">apt</span> <span class="token parameter variable">-y</span> <span class="token function">install</span> neutron-server neutron-plugin-ml2 python3-neutronclient ovn-central openvswitch-switch
</code></pre></div><h4 id="配置组件-4"><a href="#配置组件-4" class="header-anchor">#</a> 配置组件</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">vim</span> /etc/neutron/neutron.conf
<span class="token punctuation">[</span>DEFAULT<span class="token punctuation">]</span>
bind_host <span class="token operator">=</span> controller124
bind_port <span class="token operator">=</span> <span class="token number">9696</span>
core_plugin <span class="token operator">=</span> ml2
service_plugins <span class="token operator">=</span> ovn-router
auth_strategy <span class="token operator">=</span> keystone
state_path <span class="token operator">=</span> /var/lib/neutron
allow_overlapping_ips <span class="token operator">=</span> True
notify_nova_on_port_status_changes <span class="token operator">=</span> True
notify_nova_on_port_data_changes <span class="token operator">=</span> True
transport_url <span class="token operator">=</span> rabbit://openstack:RABBIT_PASS@controller124
<span class="token punctuation">[</span>agent<span class="token punctuation">]</span>
<span class="token punctuation">[</span>cache<span class="token punctuation">]</span>
<span class="token punctuation">[</span>cors<span class="token punctuation">]</span>
<span class="token punctuation">[</span>database<span class="token punctuation">]</span>
connection <span class="token operator">=</span> mysql+pymysql://neutron:NEUTRON_DBPASS@controller124/neutron
<span class="token punctuation">[</span>healthcheck<span class="token punctuation">]</span>
<span class="token punctuation">[</span>ironic<span class="token punctuation">]</span>
<span class="token punctuation">[</span>keystone_authtoken<span class="token punctuation">]</span>
www_authenticate_uri <span class="token operator">=</span> http://controller124:5000
auth_url <span class="token operator">=</span> http://controller124:5000
memcached_servers <span class="token operator">=</span> controller124:11211
auth_type <span class="token operator">=</span> password
project_domain_name <span class="token operator">=</span> Default
user_domain_name <span class="token operator">=</span> Default
project_name <span class="token operator">=</span> <span class="token function">service</span>
username <span class="token operator">=</span> neutron
password <span class="token operator">=</span> NEUTRON_PASS
<span class="token punctuation">[</span>nova<span class="token punctuation">]</span>
auth_url <span class="token operator">=</span> http://controller124:5000
auth_type <span class="token operator">=</span> password
project_domain_name <span class="token operator">=</span> Default
user_domain_name <span class="token operator">=</span> Default
region_name <span class="token operator">=</span> RegionOne
project_name <span class="token operator">=</span> <span class="token function">service</span>
username <span class="token operator">=</span> nova
password <span class="token operator">=</span> NOVA_PASS
<span class="token punctuation">[</span>oslo_concurrency<span class="token punctuation">]</span>
lock_path <span class="token operator">=</span> /var/lib/neutron/tmp
<span class="token punctuation">[</span>oslo_messaging_amqp<span class="token punctuation">]</span>
<span class="token punctuation">[</span>oslo_messaging_kafka<span class="token punctuation">]</span>
<span class="token punctuation">[</span>oslo_messaging_notifications<span class="token punctuation">]</span>
<span class="token punctuation">[</span>oslo_messaging_rabbit<span class="token punctuation">]</span>
<span class="token punctuation">[</span>oslo_messaging_rabbit<span class="token punctuation">]</span>
<span class="token punctuation">[</span>oslo_middleware<span class="token punctuation">]</span>
<span class="token punctuation">[</span>oslo_policy<span class="token punctuation">]</span>
<span class="token punctuation">[</span>oslo_reports<span class="token punctuation">]</span>
<span class="token punctuation">[</span>placement<span class="token punctuation">]</span>
<span class="token punctuation">[</span>privsep<span class="token punctuation">]</span>
<span class="token punctuation">[</span>profiler<span class="token punctuation">]</span>
<span class="token punctuation">[</span>quotas<span class="token punctuation">]</span>
<span class="token punctuation">[</span>ssl<span class="token punctuation">]</span>

</code></pre></div><p>RABBIT_PASS为rabbit创建openstack用户创建的密码</p> <p>NEUTRON_PASS为openstack创建neutron用户设置的密码</p> <p>NEUTRON_PASS为创建neutron用户访问数据库设置的密码</p> <p>NOVA_PASS为openstack创建nova用户设置的密码</p> <p>ControllerIP为Controller节点的IP地址</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">vim</span> /etc/default/openvswitch-switch
<span class="token assign-left variable">OVS_CTL_OPTS</span><span class="token operator">=</span><span class="token string">&quot;--ovsdb-server-options='--remote=ptcp:6640:127.0.0.1'&quot;</span>

<span class="token function">vim</span> /etc/nova/nova.conf
<span class="token punctuation">[</span>neutron<span class="token punctuation">]</span>
auth_url <span class="token operator">=</span> http://controller124:5000
auth_type <span class="token operator">=</span> password
project_domain_name <span class="token operator">=</span> Default
user_domain_name <span class="token operator">=</span> Default
region_name <span class="token operator">=</span> RegionOne
project_name <span class="token operator">=</span> <span class="token function">service</span>
username <span class="token operator">=</span> neutron
password <span class="token operator">=</span> NEUTRON_PASS
service_metadata_proxy <span class="token operator">=</span> True
metadata_proxy_shared_secret <span class="token operator">=</span> METADATA_PASS
insecure <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre></div><p>NEUTRON_PASS为openstack创建neutron用户设置的密码
METADATA_PASS为创建的密码</p> <h4 id="填充数据库-4"><a href="#填充数据库-4" class="header-anchor">#</a> 填充数据库</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">su</span> <span class="token parameter variable">-s</span> /bin/sh <span class="token parameter variable">-c</span> <span class="token string">&quot;neutron-db-manage --config-file /etc/neutron/neutron.conf \
  --config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade head&quot;</span> neutron
</code></pre></div><h4 id="重启服务-2"><a href="#重启服务-2" class="header-anchor">#</a> 重启服务</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl restart nova-api
systemctl restart openvswitch-switch
ovs-vsctl add-br br-int 
systemctl restart ovn-central ovn-northd
ovn-nbctl set-connection ptcp:6641:Controller的IP -- <span class="token builtin class-name">set</span> connection <span class="token builtin class-name">.</span> <span class="token assign-left variable">inactivity_probe</span><span class="token operator">=</span><span class="token number">60000</span>
ovn-sbctl set-connection ptcp:6642:Controller的IP -- <span class="token builtin class-name">set</span> connection <span class="token builtin class-name">.</span> <span class="token assign-left variable">inactivity_probe</span><span class="token operator">=</span><span class="token number">60000</span>
</code></pre></div><p>ControllerIP为Controller节点的IP地址</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl restart neutron-server
</code></pre></div><h3 id="在compute节点配置完neutron后"><a href="#在compute节点配置完neutron后" class="header-anchor">#</a> 在Compute节点配置完Neutron后</h3> <h3 id="配置验证"><a href="#配置验证" class="header-anchor">#</a> 配置验证</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">source</span> ./admin-openrc-fish.sh 
openstack network agent list
<span class="token comment"># 输入如下的内容表示成功</span>
root@controller124:~<span class="token comment"># openstack network agent list</span>
+--------------------------------------+----------------------+----------+-------------------+-------+-------+----------------------------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Agent Type           <span class="token operator">|</span> Host     <span class="token operator">|</span> Availability Zone <span class="token operator">|</span> Alive <span class="token operator">|</span> State <span class="token operator">|</span> Binary                     <span class="token operator">|</span>
+--------------------------------------+----------------------+----------+-------------------+-------+-------+----------------------------+
<span class="token operator">|</span> e42ab135-4870-4bfd-8b90-47ad92732627 <span class="token operator">|</span> OVN Controller agent <span class="token operator">|</span> compute1 <span class="token operator">|</span>                   <span class="token operator">|</span> :-<span class="token punctuation">)</span>   <span class="token operator">|</span> UP    <span class="token operator">|</span> ovn-controller             <span class="token operator">|</span>
<span class="token operator">|</span> 952c013f-c53d-54b8-89b4-d55930a40171 <span class="token operator">|</span> OVN Metadata agent   <span class="token operator">|</span> compute1 <span class="token operator">|</span>                   <span class="token operator">|</span> :-<span class="token punctuation">)</span>   <span class="token operator">|</span> UP    <span class="token operator">|</span> neutron-ovn-metadata-agent <span class="token operator">|</span>
+--------------------------------------+----------------------+----------+----------
</code></pre></div><h3 id="创建ovn网络"><a href="#创建ovn网络" class="header-anchor">#</a> 创建OVN网络!!!</h3> <h4 id="controller节点-和-compute节点-都需要的操作"><a href="#controller节点-和-compute节点-都需要的操作" class="header-anchor">#</a> Controller节点!!! 和 Compute节点!!! 都需要的操作:</h4> <p>开始</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># br-ens34你可以随便取名字</span>
ovs-vsctl add-br br-ens34
<span class="token number">12</span>
<span class="token comment"># ens34为第二张网卡的名称</span>
ovs-vsctl add-port br-ens34 ens34
<span class="token number">12</span>
<span class="token comment"># provider你可以随便取名字</span>
ovs-vsctl <span class="token builtin class-name">set</span> <span class="token function">open</span> <span class="token builtin class-name">.</span> external-ids:ovn-bridge-mappings<span class="token operator">=</span>provider:br-ens34
</code></pre></div><p>结束</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 创建一个路由</span>
openstack router create router

<span class="token comment"># 创建selfservice</span>
openstack network create selfservice --provider-network-type geneve

<span class="token comment"># 创建selfservice子网</span>
openstack subnet create <span class="token parameter variable">--network</span> selfservice <span class="token punctuation">\</span>
  --dns-nameserver <span class="token number">8.8</span>.8.8 <span class="token parameter variable">--gateway</span> <span class="token number">172.16</span>.1.1 <span class="token punctuation">\</span>
  --subnet-range <span class="token number">172.16</span>.1.0/24 selfservice

<span class="token comment"># 创建外部网络</span>
openstack network create  <span class="token parameter variable">--share</span> <span class="token parameter variable">--external</span> <span class="token punctuation">\</span>
  --provider-physical-network provider <span class="token punctuation">\</span>
  --provider-network-type flat provider

<span class="token comment"># 创建外部网络子网</span>
openstack subnet create <span class="token parameter variable">--network</span> provider <span class="token punctuation">\</span>
  --allocation-pool <span class="token assign-left variable">start</span><span class="token operator">=</span><span class="token number">192.168</span>.46.240,end<span class="token operator">=</span><span class="token number">192.168</span>.46.250 <span class="token punctuation">\</span>
  --dns-nameserver <span class="token number">8.8</span>.8.8 <span class="token parameter variable">--gateway</span> <span class="token number">192.168</span>.46.2 <span class="token punctuation">\</span>
  --subnet-range <span class="token number">192.168</span>.46.0/24 provider

<span class="token comment"># 给路由设置网关</span>
openstack router <span class="token builtin class-name">set</span> router --external-gateway provider

<span class="token comment"># 给路由添加内部接口</span>
openstack router <span class="token function">add</span> subnet router selfservice

<span class="token comment"># 验证是否成功</span>
openstack port list <span class="token parameter variable">--router</span> router

<span class="token comment"># 输入如下的内容表示成功</span>
root@controller124:~<span class="token comment"># openstack port list --router router</span>
+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------+--------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Name <span class="token operator">|</span> MAC Address       <span class="token operator">|</span> Fixed IP Addresses                                                            <span class="token operator">|</span> Status <span class="token operator">|</span>
+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------+--------+
<span class="token operator">|</span> 56a061e8-f5b1-4df8-8dcb-347bb53ecead <span class="token operator">|</span>      <span class="token operator">|</span> fa:16:3e:28:2c:c3 <span class="token operator">|</span> <span class="token assign-left variable">ip_address</span><span class="token operator">=</span><span class="token string">'172.16.1.1'</span>, <span class="token assign-left variable">subnet_id</span><span class="token operator">=</span><span class="token string">'df79d0ea-9548-486c-8c79-b9dfe9da35ff'</span>     <span class="token operator">|</span> ACTIVE <span class="token operator">|</span>
<span class="token operator">|</span> 6a5c3ba2-df0f-4552-91f1-8eafcdd65da0 <span class="token operator">|</span>      <span class="token operator">|</span> fa:16:3e:02:f7:16 <span class="token operator">|</span> <span class="token assign-left variable">ip_address</span><span class="token operator">=</span><span class="token string">'192.168.46.249'</span>, <span class="token assign-left variable">subnet_id</span><span class="token operator">=</span><span class="token string">'d608e2b9-d2e2-423c-bfec-2a23a1516760'</span> <span class="token operator">|</span> ACTIVE <span class="token operator">|</span>
+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------+--------+
<span class="token comment"># 也可以通过如下的命令查看</span>
ovn-nbctl show

<span class="token comment"># 输出如下的内容</span>
root@controller124:~<span class="token comment"># ovn-nbctl show</span>
switch dc4e3afc-da27-4e73-b741-a1c8d57434f7 <span class="token punctuation">(</span>neutron-43fe943c-fe1a-4dfe-9f3a-91dc7cdf823f<span class="token punctuation">)</span> <span class="token punctuation">(</span>aka provider<span class="token punctuation">)</span>
    port 6a5c3ba2-df0f-4552-91f1-8eafcdd65da0
        type: router
        router-port: lrp-6a5c3ba2-df0f-4552-91f1-8eafcdd65da0
    port dcd112c2-dd97-4f40-b7ba-f8d64bd68a5d
        addresses: <span class="token punctuation">[</span><span class="token string">&quot;fa:16:3e:16:bc:3a 192.168.46.246&quot;</span><span class="token punctuation">]</span>
    port provnet-3140ef3f-1dc0-4490-bfdb-134d1c611aec
        type: localnet
        addresses: <span class="token punctuation">[</span><span class="token string">&quot;unknown&quot;</span><span class="token punctuation">]</span>
    port 201604e9-1146-4536-a56d-965e82e26d8e
        type: localport
        addresses: <span class="token punctuation">[</span><span class="token string">&quot;fa:16:3e:5e:20:5b 192.168.46.240&quot;</span><span class="token punctuation">]</span>
switch e7a2f47f-0ea4-4587-bd18-d444a8f1b500 <span class="token punctuation">(</span>neutron-31f3eb52-667f-4b5a-8ef3-3f1d048b29b3<span class="token punctuation">)</span> <span class="token punctuation">(</span>aka selfservice<span class="token punctuation">)</span>
    port d47fb30d-6d47-4d57-bd4d-96f779f6e765
        type: localport
        addresses: <span class="token punctuation">[</span><span class="token string">&quot;fa:16:3e:47:46:d8 172.16.1.2&quot;</span><span class="token punctuation">]</span>
    port d2183412-590a-4bc0-b992-7efaf8a8c9f1
        addresses: <span class="token punctuation">[</span><span class="token string">&quot;fa:16:3e:a0:e5:23 172.16.1.37&quot;</span><span class="token punctuation">]</span>
    port 56a061e8-f5b1-4df8-8dcb-347bb53ecead
        type: router
        router-port: lrp-56a061e8-f5b1-4df8-8dcb-347bb53ecead
router 715fc656-e8f8-4328-aa2d-82b994bcfe2d <span class="token punctuation">(</span>neutron-43435b65-0e5e-4bc0-90fa-5a01c1aa89c2<span class="token punctuation">)</span> <span class="token punctuation">(</span>aka router<span class="token punctuation">)</span>
    port lrp-56a061e8-f5b1-4df8-8dcb-347bb53ecead
        mac: <span class="token string">&quot;fa:16:3e:28:2c:c3&quot;</span>
        networks: <span class="token punctuation">[</span><span class="token string">&quot;172.16.1.1/24&quot;</span><span class="token punctuation">]</span>
    port lrp-6a5c3ba2-df0f-4552-91f1-8eafcdd65da0
        mac: <span class="token string">&quot;fa:16:3e:02:f7:16&quot;</span>
        networks: <span class="token punctuation">[</span><span class="token string">&quot;192.168.46.249/24&quot;</span><span class="token punctuation">]</span>
        gateway chassis: <span class="token punctuation">[</span>e42ab135-4870-4bfd-8b90-47ad92732627<span class="token punctuation">]</span>
    nat d4d704be-2102-437b-bc4a-0be5504824aa
        external ip: <span class="token string">&quot;192.168.46.249&quot;</span>
        logical ip: <span class="token string">&quot;172.16.1.0/24&quot;</span>
        type: <span class="token string">&quot;snat&quot;</span>
root@controller124:~<span class="token comment"># </span>
</code></pre></div><h2 id="安装dashboard"><a href="#安装dashboard" class="header-anchor">#</a> 安装Dashboard</h2> <h4 id="安装组件-5"><a href="#安装组件-5" class="header-anchor">#</a> 安装组件</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">apt</span> <span class="token function">install</span> openstack-dashboard 
</code></pre></div><h4 id="配置组件-5"><a href="#配置组件-5" class="header-anchor">#</a> 配置组件</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">vim</span> /etc/openstack-dashboard/local_settings.py
OPENSTACK_HOST <span class="token operator">=</span> <span class="token string">&quot;controller124&quot;</span>
ALLOWED_HOSTS <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span>
SESSION_ENGINE <span class="token operator">=</span> <span class="token string">'django.contrib.sessions.backends.cache'</span>
CACHES <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'default'</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
         <span class="token string">'BACKEND'</span><span class="token builtin class-name">:</span> <span class="token string">'django.core.cache.backends.memcached.MemcachedCache'</span>,
         <span class="token string">'LOCATION'</span><span class="token builtin class-name">:</span> <span class="token string">'controller124:11211'</span>,
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
OPENSTACK_KEYSTONE_URL <span class="token operator">=</span> <span class="token string">&quot;http://%s:5000/v3&quot;</span> % OPENSTACK_HOST
OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT <span class="token operator">=</span> True
OPENSTACK_API_VERSIONS <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;identity&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span>,
    <span class="token string">&quot;image&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span>,
    <span class="token string">&quot;volume&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span>,
<span class="token punctuation">}</span>
OPENSTACK_KEYSTONE_DEFAULT_DOMAIN <span class="token operator">=</span> <span class="token string">&quot;Default&quot;</span>
OPENSTACK_KEYSTONE_DEFAULT_ROLE <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span>
<span class="token function">vim</span> /etc/apache2/conf-available/openstack-dashboard.conf
<span class="token comment"># 不存在则添加</span>
WSGIApplicationGroup %<span class="token punctuation">{</span>GLOBAL<span class="token punctuation">}</span>
</code></pre></div><h4 id="如果不能正常访问"><a href="#如果不能正常访问" class="header-anchor">#</a> 如果不能正常访问</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>python3 /usr/share/openstack-dashboard/manage.py compress
</code></pre></div><h4 id="重启服务-3"><a href="#重启服务-3" class="header-anchor">#</a> 重启服务</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl reload apache2.service
</code></pre></div><h3 id="接下来操作均可在web上操作"><a href="#接下来操作均可在web上操作" class="header-anchor">#</a> 接下来操作均可在web上操作</h3> <h3 id="创建实例的计算、内存和存储容量的大小"><a href="#创建实例的计算、内存和存储容量的大小" class="header-anchor">#</a> 创建实例的计算、内存和存储容量的大小</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack flavor create <span class="token parameter variable">--id</span> <span class="token number">0</span> <span class="token parameter variable">--vcpus</span> <span class="token number">1</span> <span class="token parameter variable">--ram</span> <span class="token number">64</span> <span class="token parameter variable">--disk</span> <span class="token number">1</span> m1.nano
openstack flavor create <span class="token parameter variable">--id</span> <span class="token number">1</span> <span class="token parameter variable">--vcpus</span> <span class="token number">1</span> <span class="token parameter variable">--ram</span> <span class="token number">256</span> <span class="token parameter variable">--disk</span> <span class="token number">1</span> m1.mini
openstack flavor create <span class="token parameter variable">--id</span> <span class="token number">2</span> <span class="token parameter variable">--vcpus</span> <span class="token number">1</span> <span class="token parameter variable">--ram</span> <span class="token number">384</span> <span class="token parameter variable">--disk</span> <span class="token number">1</span> m1.regular
openstack flavor create <span class="token parameter variable">--id</span> <span class="token number">3</span> <span class="token parameter variable">--vcpus</span> <span class="token number">1</span> <span class="token parameter variable">--ram</span> <span class="token number">512</span> <span class="token parameter variable">--disk</span> <span class="token number">1</span> m1.pro
</code></pre></div><h3 id="密钥设置"><a href="#密钥设置" class="header-anchor">#</a> 密钥设置</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>ssh-keygen <span class="token parameter variable">-q</span> <span class="token parameter variable">-N</span> <span class="token string">&quot;&quot;</span>
openstack keypair create --public-key ~/.ssh/id_rsa.pub mykey
</code></pre></div><h3 id="设置安全组"><a href="#设置安全组" class="header-anchor">#</a> 设置安全组</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>openstack security group rule create <span class="token parameter variable">--proto</span> icmp default
openstack security group rule create <span class="token parameter variable">--proto</span> tcp --dst-port <span class="token number">22</span> default
</code></pre></div><p>至此控制节点所做的操作已经全部完成。</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Superdeeep/code/edit/master/docs/03.笔记和折腾/02.技术笔记/10.OpenStack/03.控制节点安装的软件.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/e84148/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">控制节点和计算节点都需要的操作</div></a> <a href="/pages/8f805e/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">控制节点和计算节点都需要的操作</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/e84148/" class="prev">控制节点和计算节点都需要的操作</a></span> <span class="next"><a href="/pages/8f805e/">控制节点和计算节点都需要的操作</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/06415e/"><div>
            PowerShell笔记
            <!----></div></a> <span class="date">09-15</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/8f805e/"><div>
            控制节点和计算节点都需要的操作
            <!----></div></a> <span class="date">06-13</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/e84148/"><div>
            控制节点和计算节点都需要的操作
            <!----></div></a> <span class="date">06-12</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:superdeeep@outlook.com" title="发我邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Superdeeep/superdeeep.github.io" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/song?id=1856233056" title="音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2024
    <span>| 友链❤：<"">友链挂了TAT</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><div></div><div></div></div></div>
    <script src="/assets/js/app.64beb6dd.js" defer></script><script src="/assets/js/4.799cf1b3.js" defer></script><script src="/assets/js/1.45e486ed.js" defer></script><script src="/assets/js/3.333afb37.js" defer></script><script src="/assets/js/73.ca78e141.js" defer></script>
  </body>
</html>
